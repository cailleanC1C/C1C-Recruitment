{
  "statistics": {
    "detectionDate": "2025-10-10T17:54:36.777Z",
    "formats": {
      "markdown": {
        "sources": {
          "work/WelcomeCrew/REVIEW/BOOTSTRAP_GUARDRAILS/MIGRATION_PLAN.md": {
            "lines": 25,
            "tokens": 578,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/REVIEW/BOOTSTRAP_GUARDRAILS/INVENTORY.md": {
            "lines": 15,
            "tokens": 254,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/REVIEW/BOOTSTRAP_GUARDRAILS/GAP_ANALYSIS.md": {
            "lines": 6,
            "tokens": 239,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/REVIEW/BOOTSTRAP_GUARDRAILS/ACCEPTANCE_CHECKLIST.md": {
            "lines": 11,
            "tokens": 380,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/docs/DOCS_MAP.md": {
            "lines": 65,
            "tokens": 812,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/docs/DOCS_GLOSSARY.md": {
            "lines": 9,
            "tokens": 379,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/REVIEW/TODOS.md": {
            "lines": 7,
            "tokens": 154,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/REVIEW/THREATS.md": {
            "lines": 20,
            "tokens": 472,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/REVIEW/TESTPLAN.md": {
            "lines": 23,
            "tokens": 476,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/REVIEW/REVIEW.md": {
            "lines": 160,
            "tokens": 1586,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/REVIEW/PERF_NOTES.md": {
            "lines": 2,
            "tokens": 106,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/REVIEW/FINDINGS.md": {
            "lines": 1,
            "tokens": 28,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/REVIEW/ARCH_MAP.md": {
            "lines": 17,
            "tokens": 567,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/requirements.txt": {
            "lines": 3,
            "tokens": 9,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/README.md": {
            "lines": 225,
            "tokens": 2815,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/CHANGELOG.md": {
            "lines": 4,
            "tokens": 168,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/REVIEW/BOOTSTRAP_GUARDRAILS/MIGRATION_PLAN.md": {
            "lines": 25,
            "tokens": 440,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/REVIEW/BOOTSTRAP_GUARDRAILS/INVENTORY.md": {
            "lines": 40,
            "tokens": 844,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/REVIEW/BOOTSTRAP_GUARDRAILS/GAP_ANALYSIS.md": {
            "lines": 9,
            "tokens": 476,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/REVIEW/BOOTSTRAP_GUARDRAILS/ACCEPTANCE_CHECKLIST.md": {
            "lines": 18,
            "tokens": 278,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/docs/DOCS_MAP.md": {
            "lines": 30,
            "tokens": 402,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/docs/DOCS_GLOSSARY.md": {
            "lines": 11,
            "tokens": 417,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/REVIEW/TODOS.md": {
            "lines": 7,
            "tokens": 154,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/REVIEW/THREATS.md": {
            "lines": 16,
            "tokens": 475,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/REVIEW/TESTPLAN.md": {
            "lines": 9,
            "tokens": 418,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/REVIEW/REVIEW.md": {
            "lines": 79,
            "tokens": 969,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/REVIEW/PERF_NOTES.md": {
            "lines": 2,
            "tokens": 180,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/REVIEW/FINDINGS.md": {
            "lines": 2,
            "tokens": 94,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/REVIEW/ARCH_MAP.md": {
            "lines": 14,
            "tokens": 588,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/requirements.txt": {
            "lines": 7,
            "tokens": 21,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/README.md": {
            "lines": 257,
            "tokens": 3352,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/CHANGELOG.md": {
            "lines": 4,
            "tokens": 168,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 1123,
          "tokens": 18299,
          "sources": 32,
          "clones": 0,
          "duplicatedLines": 0,
          "duplicatedTokens": 0,
          "percentage": 0,
          "percentageTokens": 0,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "yaml": {
        "sources": {
          "work/WelcomeCrew/.github/workflows/sync-labels.yml": {
            "lines": 22,
            "tokens": 120,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 22,
            "duplicatedTokens": 120,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/.github/workflows/migrate-labels.yml": {
            "lines": 112,
            "tokens": 999,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 112,
            "duplicatedTokens": 999,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/.github/workflows/batch-issues.yml": {
            "lines": 129,
            "tokens": 1092,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 129,
            "duplicatedTokens": 1092,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/.github/workflows/add-to-cross-bot-project.yml": {
            "lines": 94,
            "tokens": 851,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 94,
            "duplicatedTokens": 851,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/.github/workflows/sync-labels.yml": {
            "lines": 22,
            "tokens": 120,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 22,
            "duplicatedTokens": 120,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/.github/workflows/migrate-labels.yml": {
            "lines": 112,
            "tokens": 999,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 112,
            "duplicatedTokens": 999,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/.github/workflows/batch-issues.yml": {
            "lines": 129,
            "tokens": 1092,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 129,
            "duplicatedTokens": 1092,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/.github/workflows/add-to-cross-bot-project.yml": {
            "lines": 94,
            "tokens": 851,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 94,
            "duplicatedTokens": 851,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 714,
          "tokens": 6124,
          "sources": 8,
          "clones": 4,
          "duplicatedLines": 357,
          "duplicatedTokens": 3062,
          "percentage": 50,
          "percentageTokens": 50,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "json": {
        "sources": {
          "work/WelcomeCrew/.github/labels/labels.json": {
            "lines": 51,
            "tokens": 1041,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 51,
            "duplicatedTokens": 1041,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/.github/issue-batches/issues.json": {
            "lines": 37,
            "tokens": 256,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/WelcomeCrew/.github/issue-batches/guardrails-rollout.json": {
            "lines": 31,
            "tokens": 232,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/.github/labels/labels.json": {
            "lines": 51,
            "tokens": 1041,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 51,
            "duplicatedTokens": 1041,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/.github/issue-batches/issues.json": {
            "lines": 54,
            "tokens": 304,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "work/Matchmaker/.github/issue-batches/guardrails-rollout.json": {
            "lines": 48,
            "tokens": 252,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 272,
          "tokens": 3126,
          "sources": 6,
          "clones": 1,
          "duplicatedLines": 51,
          "duplicatedTokens": 1041,
          "percentage": 18.75,
          "percentageTokens": 33.3,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "python": {
        "sources": {
          "work/Matchmaker/welcome.py": {
            "lines": 442,
            "tokens": 4744,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 442,
          "tokens": 4744,
          "sources": 1,
          "clones": 0,
          "duplicatedLines": 0,
          "duplicatedTokens": 0,
          "percentage": 0,
          "percentageTokens": 0,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      }
    },
    "total": {
      "lines": 2551,
      "tokens": 32293,
      "sources": 47,
      "clones": 5,
      "duplicatedLines": 408,
      "duplicatedTokens": 4103,
      "percentage": 15.99,
      "percentageTokens": 12.71,
      "newDuplicatedLines": 0,
      "newClones": 0
    }
  },
  "duplicates": [
    {
      "format": "yaml",
      "lines": 23,
      "fragment": "name: Sync Labels\non:\n  workflow_dispatch: {}\n  push:\n    paths:\n      - .github/labels/labels.yml\n\njobs:\n  sync:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: read\n      issues: write\n      pull-requests: write\n    steps:\n      - uses: actions/checkout@v4\n\n      # Uses a well-maintained action that reads YAML/JSON and syncs labels safely.\n      - name: Sync labels from registry\n        uses: EndBug/label-sync@v2\n        with:\n          config-file: .github/labels/labels.json\n          delete-other-labels: false",
      "tokens": 0,
      "firstFile": {
        "name": "work/Matchmaker/.github/workflows/sync-labels.yml",
        "start": 1,
        "end": 23,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 23,
          "column": 6,
          "position": 120
        }
      },
      "secondFile": {
        "name": "work/WelcomeCrew/.github/workflows/sync-labels.yml",
        "start": 1,
        "end": 23,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 23,
          "column": 6,
          "position": 120
        }
      }
    },
    {
      "format": "yaml",
      "lines": 113,
      "fragment": "name: Migrate area:* → bot:* + comp:*\n\non:\n  workflow_dispatch:\n    inputs:\n      bot_label:\n        description: \"bot:* label to apply (leave blank to auto-detect from repo name)\"\n        required: false\n        default: \"\"\n        type: string\n      state:\n        description: \"Which items to migrate\"\n        required: false\n        default: \"open\"\n        type: choice\n        options:\n          - open\n          - all\n\njobs:\n  migrate:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: read\n      issues: write\n      pull-requests: write\n    steps:\n      - name: Run migration\n        uses: actions/github-script@v7\n        with:\n          script: |\n            const inputBot = (core.getInput('bot_label') || '').trim();\n            const state = core.getInput('state') || 'open';\n            const { owner, repo } = context.repo;\n\n            // Auto-detect bot:* from repo name when input is empty\n            function detectBotLabel(repoName) {\n              const r = repoName.toLowerCase();\n              if (r.includes('reminder'))    return 'bot:reminder';\n              if (r.includes('welcome'))     return 'bot:welcomecrew';\n              if (r.includes('match'))       return 'bot:matchmaker';\n              if (r.includes('achiev') ||\n                  r.includes('claim')  ||\n                  r.includes('shard'))       return 'bot:achievements';\n              return null;\n            }\n\n            let BOT_LABEL = inputBot || detectBotLabel(repo);\n            const allowed = new Set(['bot:reminder','bot:welcomecrew','bot:matchmaker','bot:achievements']);\n            if (!BOT_LABEL || !allowed.has(BOT_LABEL)) {\n              core.setFailed(`Could not determine a valid bot label. Got '${BOT_LABEL ?? ''}'. Pass workflow input 'bot_label' explicitly (one of ${[...allowed].join(', ')}).`);\n              return;\n            }\n\n            // Map old area labels → new labels to add (besides the bot label)\n            const map = new Map([\n              ['area:reminder',       ['bot:reminder']],\n              ['area:welcomecrew',    ['bot:welcomecrew']],\n              ['area:matchmaker',     ['bot:matchmaker']],\n              ['area:achievements',   ['bot:achievements']],\n              ['area:claims',         ['bot:achievements']],   // historical alias\n              ['areaclaims',          ['bot:achievements']],   // historical alias\n              ['area:shards',         ['comp:shards']],\n              ['areashards',          ['comp:shards']],        // historical alias\n              ['area:ops',            ['comp:ops-contract']],\n              ['areaops',             ['comp:ops-contract']],  // historical alias\n            ]);\n\n            // Helper: safe add (no blanks)\n            const addIfValid = (set, name) => {\n              if (typeof name === 'string') {\n                const v = name.trim();\n                if (v.length > 0) set.add(v);\n              }\n            };\n\n            // Fetch all issues/PRs with pagination\n            const items = await github.paginate(\n              github.rest.issues.listForRepo,\n              { owner, repo, state, per_page: 100 }\n            );\n\n            let changed = 0, scanned = 0;\n\n            for (const it of items) {\n              scanned++;\n              const current = (it.labels || []).map(l => typeof l === 'string' ? l : l.name).filter(Boolean);\n              const set = new Set(current);\n\n              // Ensure exactly one bot:* (if none present, add the chosen one)\n              if (![...set].some(n => typeof n === 'string' && n.startsWith('bot:'))) {\n                addIfValid(set, BOT_LABEL);\n              }\n\n              // Replace mapped area:* labels\n              let didReplace = false;\n              for (const [oldName, addList] of map.entries()) {\n                if (set.has(oldName)) {\n                  set.delete(oldName);\n                  for (const n of addList) addIfValid(set, n);\n                  didReplace = true;\n                }\n              }\n\n              if (!didReplace) continue; // nothing to do\n\n              await github.rest.issues.setLabels({\n                owner, repo, issue_number: it.number, labels: [...set]\n              });\n              changed++;\n            }\n\n            core.notice(`Scanned ${scanned} items; updated ${changed}. BOT_LABEL=${BOT_LABEL}, state=${state}`);",
      "tokens": 0,
      "firstFile": {
        "name": "work/Matchmaker/.github/workflows/migrate-labels.yml",
        "start": 1,
        "end": 113,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 113,
          "column": 4,
          "position": 999
        }
      },
      "secondFile": {
        "name": "work/WelcomeCrew/.github/workflows/migrate-labels.yml",
        "start": 1,
        "end": 113,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 113,
          "column": 4,
          "position": 999
        }
      }
    },
    {
      "format": "yaml",
      "lines": 130,
      "fragment": "name: Batch create issues\n\non:\n  workflow_dispatch:\n    inputs:\n      file:\n        description: \"Path to issues JSON or YAML inside this repo\"\n        required: true\n        default: \".github/issue-batches/issues.json\"\n\njobs:\n  create:\n    runs-on: ubuntu-latest\n    permissions:\n      issues: write\n      contents: read\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Ensure jq & yq\n        run: |\n          sudo apt-get update\n          sudo apt-get install -y jq yq\n\n      - name: Validate input file exists\n        id: pick\n        run: |\n          FILE=\"${{ github.event.inputs.file }}\"\n          if [ ! -f \"$FILE\" ]; then\n            echo \"File not found: $FILE\" >&2\n            exit 1\n          fi\n          echo \"file=$FILE\" >> \"$GITHUB_OUTPUT\"\n\n      - name: Normalize issues file to JSON\n        run: |\n          FILE=\"${{ steps.pick.outputs.file }}\"\n          case \"$FILE\" in\n            *.yml|*.yaml) yq -o=json \"$FILE\" > issues.json ;;\n            *.json) cp \"$FILE\" issues.json ;;\n            *) echo \"Unsupported file type: $FILE\" >&2; exit 1 ;;\n          esac\n          echo \"Normalized count:\"\n          jq 'length' issues.json\n\n      - name: Create labels and issues (GitHub API)\n        uses: actions/github-script@v7\n        with:\n          script: |\n            const fs = require('fs');\n            const repo = { owner: context.repo.owner, repo: context.repo.repo };\n            const raw = fs.readFileSync('issues.json','utf8');\n\n            // Accept either a flat array OR { milestone, defaults, issues:[...] }\n            let payload;\n            try { payload = JSON.parse(raw); }\n            catch (e) { core.setFailed(\"issues.json is not valid JSON: \" + e.message); return; }\n\n            let items = [];\n            let milestoneTitle = null;\n            let defaultLabels = [];\n            let defaultAssignees = [];\n\n            if (Array.isArray(payload)) {\n              items = payload;\n            } else if (payload && typeof payload === 'object' && Array.isArray(payload.issues)) {\n              milestoneTitle   = payload.milestone || null;\n              defaultLabels    = Array.isArray(payload.defaults?.labels) ? payload.defaults.labels : [];\n              defaultAssignees = Array.isArray(payload.defaults?.assignees) ? payload.defaults.assignees : [];\n              items = payload.issues.map(it => {\n                const labels = [...new Set([...(it.labels || []), ...defaultLabels])];\n                let body = it.body || \"\";\n                if (Array.isArray(it.acceptance_criteria) && it.acceptance_criteria.length) {\n                  body += \"\\n\\nAcceptance\\n- \" + it.acceptance_criteria.join(\"\\n- \");\n                }\n                const assignees = Array.isArray(it.assignees) ? it.assignees : defaultAssignees;\n                return { title: it.title, body, labels, assignees };\n              });\n            } else {\n              core.setFailed(\"Issues file must be an array or { milestone, defaults, issues:[...] }.\");\n              return;\n            }\n\n            core.info(`Found ${items.length} issues in batch`);\n\n            // Ensure labels exist (standard + any custom from the batch)\n            const std = [\n              \"severity:critical\",\"severity:high\",\"severity:medium\",\"severity:low\",\n              \"area:scheduler\",\"area:infra\",\"area:reminders\",\"area:data\",\"area:commands\",\"area:ops\",\"area:devx\",\n              \"type:bug\",\"type:perf\",\"type:hardening\",\"type:security\",\"type:tooling\"\n            ];\n            const custom = [...new Set(items.flatMap(i => Array.isArray(i.labels) ? i.labels : []))]\n              .filter(x => !std.includes(x));\n            const allLabels = [...new Set([...std, ...custom])];\n\n            for (const name of allLabels) {\n              try {\n                await github.rest.issues.createLabel({ ...repo, name, color: \"cccccc\", description: name });\n                core.info(`Created label: ${name}`);\n              } catch (e) {\n                if (e.status === 422) core.info(`Label exists: ${name}`);\n                else core.warning(`Label \"${name}\" error: ${e.message}`);\n              }\n            }\n\n            // Optional milestone\n            let milestoneNumber = undefined;\n            if (milestoneTitle) {\n              const list = await github.rest.issues.listMilestones({ ...repo, state: \"open\" });\n              const found = list.data.find(m => m.title === milestoneTitle);\n              if (found) milestoneNumber = found.number;\n              else {\n                const created = await github.rest.issues.createMilestone({ ...repo, title: milestoneTitle });\n                milestoneNumber = created.data.number;\n              }\n              core.info(`Using milestone: ${milestoneTitle} #${milestoneNumber}`);\n            }\n\n            // Create issues\n            for (const it of items) {\n              await github.rest.issues.create({\n                ...repo,\n                title: it.title || \"(missing title)\",\n                body: it.body || \"\",\n                labels: Array.isArray(it.labels) ? it.labels : [],\n                assignees: Array.isArray(it.assignees) ? it.assignees : [],\n                milestone: milestoneNumber\n              });\n              core.info(`Created: ${it.title}`);\n            }",
      "tokens": 0,
      "firstFile": {
        "name": "work/Matchmaker/.github/workflows/batch-issues.yml",
        "start": 1,
        "end": 130,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 130,
          "column": 2,
          "position": 1092
        }
      },
      "secondFile": {
        "name": "work/WelcomeCrew/.github/workflows/batch-issues.yml",
        "start": 1,
        "end": 130,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 130,
          "column": 2,
          "position": 1092
        }
      }
    },
    {
      "format": "yaml",
      "lines": 95,
      "fragment": "name: Add issues to Cross-Bot Hotlist\non:\n  issues:\n    types: [opened, reopened, labeled, edited, transferred]\n\njobs:\n  add:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Set Priority field from P* label\n        env:\n          GH_TOKEN: ${{ secrets.PROJECTS_TOKEN }}\n          PROJECT_OWNER: cailleanC1C\n          PROJECT_NUMBER: 1   # <-- just the number, e.g. 5 (no quotes)\n          ISSUE_NODE_ID: ${{ github.event.issue.node_id }}\n          ISSUE_LABELS_JSON: ${{ toJson(github.event.issue.labels) }}\n        run: |\n          set -euo pipefail\n\n          # 1) Determine P* from labels\n          PRIORITY=$(printf '%s' \"$ISSUE_LABELS_JSON\" | jq -r 'map(.name) | map(select(test(\"^P[0-4]$\"))) | first // empty')\n          if [ -z \"$PRIORITY\" ]; then\n            echo \"No P* label; skipping Priority update.\"\n            exit 0\n          fi\n          echo \"Detected priority: $PRIORITY\"\n\n          # 2) Build a query with PROJECT_NUMBER as a literal Int\n          read -r -d '' QUERY <<'GRAPHQL' || true\n          query($owner:String!) {\n            user(login:$owner) {\n              projectV2(number: __NUM__) {\n                id\n                fields(first:50) {\n                  nodes {\n                    ... on ProjectV2SingleSelectField {\n                      id\n                      name\n                      options { id name }\n                    }\n                  }\n                }\n              }\n            }\n          }\n          GRAPHQL\n          QUERY=\"${QUERY/__NUM__/${PROJECT_NUMBER}}\"\n\n          # 3) Fetch project + Priority field + options\n          PROJ_JSON=$(gh api graphql -F owner=\"$PROJECT_OWNER\" -f query=\"$QUERY\")\n          PROJECT_ID=$(jq -r '.data.user.projectV2.id' <<<\"$PROJ_JSON\")\n          FIELD_ID=$(jq -r '.data.user.projectV2.fields.nodes[] | select(.name==\"Priority\") | .id' <<<\"$PROJ_JSON\")\n          OPTION_ID=$(jq -r --arg P \"$PRIORITY\" '.data.user.projectV2.fields.nodes[] | select(.name==\"Priority\") | .options[] | select(.name==$P) | .id' <<<\"$PROJ_JSON\")\n\n          if [ -z \"$PROJECT_ID\" ] || [ -z \"$FIELD_ID\" ] || [ -z \"$OPTION_ID\" ]; then\n            echo \"Could not resolve project/field/option ids\"; exit 1\n          fi\n\n          # 4) Ensure the item exists in the project; get item id\n          ITEMS_JSON=$(gh api graphql -F id=\"$ISSUE_NODE_ID\" -f query='\n            query($id:ID!) {\n              node(id:$id) {\n                ... on Issue {\n                  projectItems(first:50, includeArchived:false) {\n                    nodes { id project { id } }\n                  }\n                }\n              }\n            }')\n          ITEM_ID=$(jq -r --arg PID \"$PROJECT_ID\" '.data.node.projectItems.nodes[] | select(.project.id==$PID) | .id' <<<\"$ITEMS_JSON\")\n\n          if [ -z \"$ITEM_ID\" ] || [ \"$ITEM_ID\" = \"null\" ]; then\n            ADD_JSON=$(gh api graphql -F projectId=\"$PROJECT_ID\" -F contentId=\"$ISSUE_NODE_ID\" -f query='\n              mutation($projectId:ID!, $contentId:ID!) {\n                addProjectV2ItemById(input:{projectId:$projectId, contentId:$contentId}) { item { id } }\n              }')\n            ITEM_ID=$(jq -r '.data.addProjectV2ItemById.item.id' <<<\"$ADD_JSON\")\n          fi\n\n          # 5) Set the Priority value\n          gh api graphql \\\n            -F projectId=\"$PROJECT_ID\" \\\n            -F itemId=\"$ITEM_ID\" \\\n            -F fieldId=\"$FIELD_ID\" \\\n            -F optionId=\"$OPTION_ID\" \\\n            -f query='\n              mutation($projectId:ID!, $itemId:ID!, $fieldId:ID!, $optionId:String!) {\n                updateProjectV2ItemFieldValue(input:{\n                  projectId:$projectId,\n                  itemId:$itemId,\n                  fieldId:$fieldId,\n                  value:{ singleSelectOptionId:$optionId }\n                }) { clientMutationId }\n              }'\n          echo \"Priority updated to $PRIORITY.\"",
      "tokens": 0,
      "firstFile": {
        "name": "work/Matchmaker/.github/workflows/add-to-cross-bot-project.yml",
        "start": 1,
        "end": 95,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 95,
          "column": 12,
          "position": 851
        }
      },
      "secondFile": {
        "name": "work/WelcomeCrew/.github/workflows/add-to-cross-bot-project.yml",
        "start": 1,
        "end": 95,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 95,
          "column": 12,
          "position": 851
        }
      }
    },
    {
      "format": "json",
      "lines": 52,
      "fragment": "[\n  { \"name\": \"bug\", \"color\": \"d73a4a\", \"description\": \"Broken behavior or incorrect output\" },\n  { \"name\": \"perf\", \"color\": \"0e8a16\", \"description\": \"Performance regression or optimization\" },\n  { \"name\": \"robustness\", \"color\": \"0366d6\", \"description\": \"Resilience: retries, backoff, failure handling\" },\n  { \"name\": \"security\", \"color\": \"b60205\", \"description\": \"Vulnerabilities, secrets, permissions/ACL\" },\n  { \"name\": \"observability\", \"color\": \"1d76db\", \"description\": \"Logs, metrics, traces, health, diagnostics\" },\n  { \"name\": \"infra\", \"color\": \"6f42c1\", \"description\": \"Hosting, deployment, CI/CD, runtime\" },\n  { \"name\": \"architecture\", \"color\": \"5319e7\", \"description\": \"Cross-cutting design, interfaces, carve-outs\" },\n  { \"name\": \"devx\", \"color\": \"c2e0c6\", \"description\": \"Developer experience, tooling friction\" },\n  { \"name\": \"docs\", \"color\": \"0b75a8\", \"description\": \"README, guides, runbooks\" },\n  { \"name\": \"lint\", \"color\": \"cccccc\", \"description\": \"Ruff/formatting cleanups\" },\n  { \"name\": \"typecheck\", \"color\": \"bfdadc\", \"description\": \"mypy/pyright typing issues\" },\n  { \"name\": \"tests\", \"color\": \"a2eeef\", \"description\": \"Unit/integration/e2e tests\" },\n  { \"name\": \"commands\", \"color\": \"7057ff\", \"description\": \"Text/slash command behavior, permissions, UX\" },\n  { \"name\": \"data\", \"color\": \"168700\", \"description\": \"Sheets schema, caching, adapters, migrations\" },\n  { \"name\": \"config\", \"color\": \"006b75\", \"description\": \"Env vars, toggles, YAML/JSON config, secrets\" },\n\n  { \"name\": \"P0\", \"color\": \"ee0701\", \"description\": \"CRITICAL — user-visible breakage / hotfix\" },\n  { \"name\": \"P1\", \"color\": \"fbca04\", \"description\": \"HIGH — core function degraded / urgent\" },\n  { \"name\": \"P2\", \"color\": \"0e8a16\", \"description\": \"MEDIUM — important, not blocking\" },\n  { \"name\": \"P3\", \"color\": \"cccccc\", \"description\": \"LOW — cleanup/polish\" },\n  { \"name\": \"P4\", \"color\": \"e6e6e6\", \"description\": \"VERY LOW — icebox/backlog\" },\n\n  { \"name\": \"severity:critical\", \"color\": \"ee0701\", \"description\": \"Mirrors P0\" },\n  { \"name\": \"severity:high\", \"color\": \"d93f0b\", \"description\": \"Mirrors P1\" },\n  { \"name\": \"severity:medium\", \"color\": \"fbca04\", \"description\": \"Mirrors P2\" },\n  { \"name\": \"severity:low\", \"color\": \"cccccc\", \"description\": \"Mirrors P3/P4\" },\n\n  { \"name\": \"bot:reminder\", \"color\": \"0052cc\", \"description\": \"Reminder bot\" },\n  { \"name\": \"bot:welcomecrew\", \"color\": \"0052cc\", \"description\": \"WelcomeCrew bot\" },\n  { \"name\": \"bot:matchmaker\", \"color\": \"0052cc\", \"description\": \"Matchmaker bot\" },\n  { \"name\": \"bot:achievements\", \"color\": \"0052cc\", \"description\": \"Achievements/Claims bot\" },\n\n  { \"name\": \"comp:commands\", \"color\": \"7057ff\", \"description\": \"Text/slash, permissions, UX\" },\n  { \"name\": \"comp:scheduler\", \"color\": \"0366d6\", \"description\": \"Jobs, timers, offsets\" },\n  { \"name\": \"comp:health\", \"color\": \"1d76db\", \"description\": \"Health endpoint, digest, diagnostics\" },\n  { \"name\": \"comp:config\", \"color\": \"006b75\", \"description\": \"Env vars, toggles, secrets, YAML/JSON\" },\n  { \"name\": \"comp:data-sheets\", \"color\": \"168700\", \"description\": \"Google Sheets schema, reads/writes, adapters\" },\n  { \"name\": \"comp:cache\", \"color\": \"0e8a16\", \"description\": \"Caching layers / TTL / cold start\" },\n  { \"name\": \"comp:roles\", \"color\": \"c27ba0\", \"description\": \"Role grants, achievements, approvals\" },\n  { \"name\": \"comp:onboarding\", \"color\": \"c27ba0\", \"description\": \"Tickets, welcome flow, forms\" },\n  { \"name\": \"comp:placement\", \"color\": \"c27ba0\", \"description\": \"Clan matching, recruiters, moves\" },\n  { \"name\": \"comp:ocr\", \"color\": \"5319e7\", \"description\": \"Image parsing pipeline\" },\n  { \"name\": \"comp:shards\", \"color\": \"5319e7\", \"description\": \"Shard/mercy tracking logic\" },\n  { \"name\": \"comp:ops-contract\", \"color\": \"6f42c1\", \"description\": \"Ops parity: ping/health/digest/reload\" },\n\n  { \"name\": \"needs:triage\", \"color\": \"fef2c0\", \"description\": \"Awaiting label & priority\" },\n  { \"name\": \"ready\", \"color\": \"0e8a16\", \"description\": \"Groomed and ready for pickup\" },\n  { \"name\": \"blocked\", \"color\": \"b60205\", \"description\": \"Blocked by dependency or decision\" },\n  { \"name\": \"help wanted\", \"color\": \"008672\", \"description\": \"Community contributions welcome\" },\n  { \"name\": \"good first issue\", \"color\": \"7057ff\", \"description\": \"Low-risk starter task\" }\n]",
      "tokens": 0,
      "firstFile": {
        "name": "work/Matchmaker/.github/labels/labels.json",
        "start": 1,
        "end": 52,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 52,
          "column": 2,
          "position": 1041
        }
      },
      "secondFile": {
        "name": "work/WelcomeCrew/.github/labels/labels.json",
        "start": 1,
        "end": 52,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 52,
          "column": 2,
          "position": 1041
        }
      }
    }
  ]
}